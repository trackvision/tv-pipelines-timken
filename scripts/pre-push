#!/bin/bash
# Pre-push hook: runs go vet and golangci-lint before pushing
# Install: cp scripts/pre-push .git/hooks/pre-push && chmod +x .git/hooks/pre-push
# Or run: make setup-hooks

set -e

echo "Running pre-push checks..."

echo "==> go vet ./..."
go vet ./...

echo "==> golangci-lint run ./..."
if command -v golangci-lint &> /dev/null; then
    golangci-lint run ./...
else
    echo "Warning: golangci-lint not installed, skipping"
    echo "Install: go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest"
fi

echo "==> go test ./..."
go test ./...

echo "All pre-push checks passed!"
